<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>
    <script src="js/modal.js" defer></script>
    <script src="js/dashboard.js" defer></script>
    <link href="https://fonts.cdnfonts.com/css/satoshi" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    />

    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./css/global.css" />
    <link rel="stylesheet" href="./css/satoshi.css" />

    <link rel="stylesheet" href="./css/header.css" />
    <link rel="stylesheet" href="./css/dialog.css" />
    <link rel="stylesheet" href="./css/dashboard.css" />
  </head>
  <body>
    <div class="page-loader">
      <div class="loader"></div>
    </div>
    <div class="wrapper">
      <div class="grid">
        <aside class="sidebar">
          <div class="header">
            <h2 class="logo"><a href="#" class="logo-link">payconnect</a></h2>
          </div>

          <section class="sidebar-items">
            <div class="sidebar-group">
              <h2 class="group-header">User module</h2>
              <ul class="sidebar-list">
                <li>
                  <a href="#dashboard" class="active-tab"
                    ><img src="imgs/dashboard/home_32px.png" alt="" /> Home</a
                  >
                </li>
                <li>
                  <a href="#"
                    ><img src="imgs/dashboard/payment.png" alt="" /> Payments</a
                  >
                </li>
                <li>
                  <a href="#transaction-history">
                    <img
                      src="imgs/dashboard/receipt_and_change_32px.png"
                      alt=""
                    />
                    Transaction history</a
                  >
                </li>

                <li>
                  <a href="#">
                    <img src="imgs/dashboard/notification_32px.png" alt="" />
                    Notifications</a
                  >
                </li>
              </ul>
            </div>

            <div class="sidebar-group">
              <h2 class="group-header">Tools</h2>
              <ul class="sidebar-list">
                <li>
                  <a href="#"
                    ><img src="imgs/dashboard/settings_32px.png" alt="" />
                    Settings</a
                  >
                </li>
                <li>
                  <a href="#"
                    ><img src="imgs/dashboard/headset_32px.png" alt="" /> Chat
                    and support</a
                  >
                </li>

                <li>
                  <a href="signUp.html"
                    ><img src="imgs/dashboard/Logout Rounded_32px.png" alt="" />
                    log out</a
                  >
                </li>
              </ul>
            </div>
          </section>
        </aside>
        <main class="dashboard">
          <div class="header">
            <h2 class="greeting">☀️ Good Afternoon, Mr. Nkenfack!</h2>
          </div>
          <div class="dashboard-content">
            <div class="title">
              <div>
                <h2>Dashboard</h2>
                <p>Overview of you transaction history</p>
              </div>

              <div class="buttons">
                <button
                  class="btn btn-dark"
                  id="#payBtn"
                  type="button"
                  data-modal-target="#make-payment-modal"
                >
                  Top up Account
                  <img src="imgs/dashboard/makepay.png" alt="" />
                </button>
                <button
                  type="button"
                  class="btn btn-white"
                  data-modal-target="#topup-modal"
                >
                  Make a Payment

                  <img src="imgs/dashboard/topup.png" alt="" />
                </button>
              </div>
            </div>

            <!-- user data -->
            <div class="grid-cards-three">
              <div class="grid-card">
                <!-- card header -->
                <div class="card-header">
                  <div class="img-container">
                    <img src="/imgs/dashboard/wallet.png" alt="" />
                  </div>
                  <h3>Wallet Balance</h3>
                </div>
                <h2 class="amount main-balance">XAF 578,000</h2>
              </div>
              <div class="grid-card">
                <!-- card header -->
                <div class="card-header">
                  <div class="img-container">
                    <img src="/imgs/dashboard/calendar_minus_48px.png" alt="" />
                  </div>
                  <h3>Merchant Loan Balance</h3>
                </div>
                <h2 class="amount">XAF 110,000</h2>
              </div>
              <div class="grid-card">
                <!-- card header -->
                <div class="card-header">
                  <div class="img-container">
                    <img src="/imgs/dashboard/order_history_50px.png" alt="" />
                  </div>
                  <h3>Completed Payment</h3>
                </div>
                <h2 class="amount">23</h2>
              </div>
            </div>
            <!-- <div class="section-header">
              <h3>Payment details</h3>
            </div> -->
            <!-- payments -->
            <div class="grid-cards">
              <div class="grid-card">
                <!-- card header -->
                <div class="card-header">
                  <div class="img-container">
                    <img src="/imgs/dashboard/calendar_minus_48px.png" alt="" />
                  </div>
                  <div class="card-header-details">
                    <div class="left">
                      <h3>Total Payment</h3>
                      <h2>579</h2>
                    </div>
                    <div class="right">
                      <div class="chart">+15%</div>
                    </div>
                  </div>
                </div>

                <div class="details">
                  <a href="#" class="details-btn"
                    >See details <i class="fa fa-arrow-right"></i
                  ></a>
                </div>
              </div>
              <div class="grid-card">
                <!-- card header -->
                <div class="card-header">
                  <div class="img-container">
                    <img src="/imgs/dashboard/calendar_minus_48px.png" alt="" />
                  </div>
                  <div class="card-header-details">
                    <div class="left">
                      <h3>Completed Payment</h3>
                      <h2>579</h2>
                    </div>
                    <div class="right">
                      <div class="chart">+15%</div>
                    </div>
                  </div>
                </div>

                <div class="details">
                  <a href="#" class="details-btn"
                    >See details <i class="fa fa-arrow-right"></i
                  ></a>
                </div>
              </div>
              <div class="grid-card">
                <!-- card header -->
                <div class="card-header">
                  <div class="img-container">
                    <img src="/imgs/dashboard/calendar_minus_48px.png" alt="" />
                  </div>
                  <div class="card-header-details">
                    <div class="left">
                      <h3>Failed Payment</h3>
                      <h2>579</h2>
                    </div>
                    <div class="right">
                      <div class="chart">+15%</div>
                    </div>
                  </div>
                </div>

                <div class="details">
                  <a href="#" class="details-btn"
                    >See details <i class="fa fa-arrow-right"></i
                  ></a>
                </div>
              </div>
              <div class="grid-card">
                <!-- card header -->
                <div class="card-header">
                  <div class="img-container">
                    <img src="/imgs/dashboard/calendar_minus_48px.png" alt="" />
                  </div>
                  <div class="card-header-details">
                    <div class="left">
                      <h3>Payment Record</h3>
                      <h2>579</h2>
                    </div>
                    <div class="right">
                      <div class="chart">+15%</div>
                    </div>
                  </div>
                </div>

                <div class="details">
                  <a href="#" class="details-btn"
                    >See details <i class="fa fa-arrow-right"></i
                  ></a>
                </div>
              </div>
            </div>

            <!-- payment popup -->
            <!-- modal -->
            <div id="overlay"></div>
            <div class="modal active" id="make-payment-modal">
              <form action="" class="makepayment-form" id="payment-form">
                <h3>Make a payment</h3>
                <button type="button" class="close-button" data-close-button>
                  <img
                    src="imgs/newletter-imgs/close_window_24px.png"
                    alt=""
                    class="close-btn"
                  />
                </button>

                <div class="form-group">
                  <label>Select country</label>
                  <select name="" id="select">
                    <option value="Cameroon"></option>
                  </select>
                </div>
                <div class="form-group-group">
                  <div class="form-group">
                    <label>Username</label>
                    <input
                      type="text"
                      name="username"
                      placeholder="Tita silas"
                      class="username"
                      required
                    />
                  </div>
                  <div class="form-group">
                    <label>Number</label>
                    <input
                      type="number"
                      name="number"
                      placeholder="6712345678"
                      class="number"
                      required
                    />
                  </div>
                </div>
                <div class="form-group">
                  <label>Amount</label>
                  <input
                    type="text"
                    name="amount"
                    placeholder="XAF 000000"
                    class="amount"
                    required
                  />
                </div>
                <div class="form-group">
                  <label>Reason for transfer</label>
                  <input
                    type="text"
                    name="reason"
                    placeholder="for accessories!"
                    class="reference"
                    required
                  />
                </div>

                <div class="buttons">
                  <button class="btn btn-primary">
                    Proceed 
                    <img src="/imgs/dashboard/forward_arrow_50px.png" alt="" />
                  </button>
                  <button type="reset" class="btn btn-cancel" id="cancel-btn">
                    Cancel 
                  </button>
                </div>
              </form>
            </div>

            <!-- topup popup -->
            <div class="modal active" id="topup-modal">
              <form action="">
                <h3>Top up your account</h3>
                <button type="button" class="close-button" data-close-button>
                  <img
                    src="imgs/newletter-imgs/close_window_24px.png"
                    alt=""
                    class="close-btn"
                  />
                </button>

                <form action="">
                  <div class="form-group">
                    <label>Amount</label>
                    <input
                      type="number"
                      name="amount"
                      placeholder="XAF 000000"
                      class="amount"
                      pattern="[0-9]*"
                      inputmode="numeric"
                      required
                    />
                  </div>

                  <div class="buttons">
                    <button class="btn btn-dark">
                      Continue with Nkwa Pay
                      <img
                        src="/imgs/dashboard/download.jpeg"
                        alt="nkwa logo"
                        class="nkwa-logo"
                      />
                    </button>
                    <!-- <button
                      type="button"
                      class="btn btn-cancel"
                      id="cancel-btn"
                    >
                      Cancel payment
                    </button> -->
                  </div>
                </form>
              </form>
            </div>

            <!-- transaction history -->
            <div class="section-header" id="transaction-history">
              <h3>Transaction History</h3>
            </div>
            <section class="transaction-history">
              <table>
                <tr>
                  <th>Invoice ID</th>
                  <th>Recipient name</th>
                  <th>Date</th>
                  <th>Location</th>
                  <th>Amount</th>
                  <th>Status</th>
                  <th>Action</th>
                </tr>

                <tr>
                  <td>ID: 30963 <i class="fas fa-copy"></i></td>
                  <td>Amina Njoroge</td>
                  <td>2025-05-02</td>
                  <td>Nairobi, Kenya</td>
                  <td>₦32,000</td>
                  <td><span class="success">Completed</span></td>
                  <td><i class="fas fa-ellipsis-h"></i></td>
                </tr>
                <tr>
                  <td>ID: 30964 <i class="fas fa-copy"></i></td>
                  <td>Chinedu Okafor</td>
                  <td>2025-04-29</td>
                  <td>Lagos, Nigeria</td>
                  <td>₦15,500</td>
                  <td><span class="pending">Pending</span></td>
                  <td><i class="fas fa-ellipsis-h"></i></td>
                </tr>
                <tr>
                  <td>ID: 30965 <i class="fas fa-copy"></i></td>
                  <td>Fatoumata Diallo</td>
                  <td>2025-05-01</td>
                  <td>Bamako, Mali</td>
                  <td>₣18,700</td>
                  <td><span class="danger">Cancelled</span></td>
                  <td><i class="fas fa-ellipsis-h"></i></td>
                </tr>
                <tr>
                  <td>ID: 30966 <i class="fas fa-copy"></i></td>
                  <td>Kofi Mensah</td>
                  <td>2025-05-03</td>
                  <td>Accra, Ghana</td>
                  <td>GH₵5,000</td>
                  <td><span class="success">Completed</span></td>
                  <td><i class="fas fa-ellipsis-h"></i></td>
                </tr>
                <tr>
                  <td>ID: 30967 <i class="fas fa-copy"></i></td>
                  <td>Bella Ngoma</td>
                  <td>2025-05-05</td>
                  <td>Kinshasa, DRC</td>
                  <td>$42</td>
                  <td><span class="pending">Pending</span></td>
                  <td><i class="fas fa-ellipsis-h"></i></td>
                </tr>
                <tr>
                  <td>ID: 30968 <i class="fas fa-copy"></i></td>
                  <td>Mohamed Keita</td>
                  <td>2025-05-01</td>
                  <td>Conakry, Guinea</td>
                  <td>GNF 120,000</td>
                  <td><span class="success">Completed</span></td>
                  <td><i class="fas fa-ellipsis-h"></i></td>
                </tr>
                <tr>
                  <td>ID: 30969 <i class="fas fa-copy"></i></td>
                  <td>Naledi Mokoena</td>
                  <td>2025-04-28</td>
                  <td>Pretoria, South Africa</td>
                  <td>R1,200</td>
                  <td><span class="danger">Cancelled</span></td>
                  <td><i class="fas fa-ellipsis-h"></i></td>
                </tr>
                <tr>
                  <td>ID: 30970 <i class="fas fa-copy"></i></td>
                  <td>Jean-Claude Bemba</td>
                  <td>2025-05-04</td>
                  <td>Yaoundé, Cameroon</td>
                  <td>XAF 10,000</td>
                  <td><span class="pending">Pending</span></td>
                  <td><i class="fas fa-ellipsis-h"></i></td>
                </tr>
                <tr>
                  <td>ID: 30971 <i class="fas fa-copy"></i></td>
                  <td>Rokia Traoré</td>
                  <td>2025-04-30</td>
                  <td>Bobo-Dioulasso, Burkina Faso</td>
                  <td>₣9,000</td>
                  <td><span class="success">Completed</span></td>
                  <td><i class="fas fa-ellipsis-h"></i></td>
                </tr>
                <tr>
                  <td>ID: 30972 <i class="fas fa-copy"></i></td>
                  <td>Josephine Atieno</td>
                  <td>2025-05-03</td>
                  <td>Kisumu, Kenya</td>
                  <td>₦20,000</td>
                  <td><span class="success">Completed</span></td>
                  <td><i class="fas fa-ellipsis-h"></i></td>
                </tr>
                <tr>
                  <td>ID: 30973 <i class="fas fa-copy"></i></td>
                  <td>Tariro Chikafu</td>
                  <td>2025-05-02</td>
                  <td>Harare, Zimbabwe</td>
                  <td>$75</td>
                  <td><span class="danger">Cancelled</span></td>
                  <td><i class="fas fa-ellipsis-h"></i></td>
                </tr>
              </table>
            </section>
          </div>
        </main>
      </div>
    </div>

    <script>
      const form = document.getElementById("payment-form");

      form.addEventListener("submit", function (e) {
        e.preventDefault();

        const numberInput = form.querySelector(".number").value.trim();
        const amountInput = parseInt(
          form.querySelector(".amount").value.trim()
        );
        const fullPhoneNumber = `237${numberInput}`;

        const options = {
          method: "POST",
          headers: {
            "X-API-Key": "qTeIlYfN0G_p8rm8HsYql",
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            amount: amountInput,
            phoneNumber: fullPhoneNumber,
          }),
        };

        fetch("https://api.pay.mynkwa.com/collect", options)
          .then((response) => response.json())
          .then((data) => {
            console.log("Payment initiated:", data);
            alert("Payment request sent successfully!");
          })
          .catch((error) => {
            console.error("Error:", error);
            alert("Payment failed. Check console for more info.");
          });
      });
    </script>
  </body>
</html>
